<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh sách sản phẩm</title>
    <link rel="stylesheet" href="mainstyle.css">
</head>
<body>
    <form action="get.html" method="get" id="inputForm">
            <table>
                <thead>
                    <th>Part Number</th>
                    <th>Description</th>
                    <th>Price</th>
                    <th>Qty</th>
                    <th>Item table</th>
                </thead>
                <tbody>
                    <tr>
                        <td>C112</td>
                        <td>Mouse</td>
                        <td id="price1" data-price="19.95">19.95$</td>
                        <td><input type="number" name="qty1" id="qty1"></td>
                        <td><input type="text" name="item1"></td>
                    </tr>
                    <tr>
                        <td>B124</td>
                        <td>Keyboard US</td>
                        <td id="price2" data-price="29.95">29.95$</td>
                        <td><input type="number" name="qty2" id="qty2"></td>
                        <td><input type="text" name="item2"></td>
                    </tr>
                    <tr>
                        <td>U125</td>
                        <td>USB KingMax</td>
                        <td id="price3" data-price="39.95">39.95$</td>
                        <td><input type="number" name="qty3" id="qty3"></td>
                        <td><input type="text" name="item3"></td>
                    </tr>
                </tbody>
            </table>
            <hr>
            <div class="right">
                <span>Total:</span>
                <input type="number" name="total" id="total">

                <br>
                <button type="sum" onclick="calculateTotal()">Sum</button>
            </div>
                 
    </form>
    <script>
        function calculateTotal() {
            let totalQty = 0;
            let totalPrice = 0;

            for (let i = 1; i <= 3; i++) {
                const qtyInput = document.querySelector('#qty'+i);
                const priceCell = document.querySelector('#price'+i);
                if (qtyInput && priceCell) {
                    const qtyValue = parseFloat(qtyInput.value) || 0;
                    const priceValue = parseFloat(priceCell.getAttribute("data-price")) || 0;

                    totalQty += qtyValue;
                    totalPrice += qtyValue * priceValue;
                }
            }

            document.querySelector('#total').value = totalPrice;
            
            document.getElementById("inputForm").setAttribute("action", './get.html?total=${totalPrice}');
            document.getElementById("inputForm").submit();
        }
    </script>
</body>
</html>